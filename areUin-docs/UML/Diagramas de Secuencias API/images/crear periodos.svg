<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="648px" preserveAspectRatio="none" style="width:921px;height:648px;" version="1.1" viewBox="0 0 921 648" width="921px" zoomAndPan="magnify"><defs><filter height="300%" id="f15c1o1g3sezzf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#FF0000" font-family="sans-serif" font-size="20" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="390" y="30.7617">Crear Periodos</text><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="344.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="222.2266"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="615" y="252.5781"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="674" y="313.2813"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="830.5" y="373.9844"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="830.5" y="506.2266"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="155.5938" style="stroke: #000000; stroke-width: 2.0;" width="896" x="13" y="419.3359"/><rect fill="#FFFFFF" height="106.8906" style="stroke: none; stroke-width: 1.0;" width="896" x="13" y="468.0391"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="64" x2="64" y1="91.7656" y2="591.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="544" x2="544" y1="91.7656" y2="591.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="620" x2="620" y1="91.7656" y2="591.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="679" x2="679" y1="91.7656" y2="591.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="740" x2="740" y1="91.7656" y2="591.9297"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="835" x2="835" y1="91.7656" y2="591.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="23" y="88.6895">WEB/Mobile</text><path d="M43.5,46.1563 L43.5,70.1563 M43.5,58.1563 L60.5,58.1563 " fill="none" filter="url(#f15c1o1g3sezzf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="72.5" cy="58.1563" fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="76" x="23" y="605.4629">WEB/Mobile</text><path d="M43.5,612.5391 L43.5,636.5391 M43.5,624.5391 L60.5,624.5391 " fill="none" filter="url(#f15c1o1g3sezzf)" style="stroke: #A80036; stroke-width: 2.0;"/><ellipse cx="72.5" cy="624.5391" fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="517" y="88.6895">Periods</text><ellipse cx="544" cy="58.1563" fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="540,46.1563,546,41.1563,544,46.1563,546,51.1563,540,46.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="517" y="605.4629">Periods</text><ellipse cx="544" cy="624.5391" fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" rx="12" ry="12" style="stroke: #A80036; stroke-width: 2.0;"/><polygon fill="#A80036" points="540,612.5391,546,607.5391,544,612.5391,546,617.5391,540,612.5391" style="stroke: #A80036; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="34" x="601" y="55.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="608" y="76.6895">res</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="34" x="601" y="590.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="20" x="608" y="612.4629">res</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="649" y="55.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="656" y="76.6895">lodash</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="649" y="590.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="656" y="612.4629">lodash</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="719" y="55.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="726" y="76.6895">utils</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="39" x="719" y="590.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="25" x="726" y="612.4629">utils</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="772" y="55.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="779" y="76.6895">PeriodRepository</text><rect fill="#FEFECE" filter="url(#f15c1o1g3sezzf)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="772" y="590.9297"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="779" y="612.4629">PeriodRepository</text><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="344.7031" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="539" y="222.2266"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="615" y="252.5781"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="674" y="313.2813"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="830.5" y="373.9844"/><rect fill="#FFFFFF" filter="url(#f15c1o1g3sezzf)" height="30.3516" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="830.5" y="506.2266"/><polygon fill="#A80036" points="527,218.2266,537,222.2266,527,226.2266,531,222.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="64" x2="533" y1="222.2266" y2="222.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="71" y="119.2607">[POST] {</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="36" x="75" y="135.6123">id: xx,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="75" y="151.9639">oddsTypeName: 'three way',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="75" y="168.3154">oddsTypeLabel: 'Ganador',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="75" y="184.667">periodName: 'FT',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="75" y="201.0186">periodLabel: 'TC'</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="71" y="217.3701">}</text><polygon fill="#A80036" points="603,248.5781,613,252.5781,603,256.5781,607,252.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="609" y1="252.5781" y2="252.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="28" x="556" y="247.7217">body</text><polygon fill="#A80036" points="560,278.9297,550,282.9297,560,286.9297,556,282.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="554" x2="619" y1="282.9297" y2="282.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="42" x="566" y="278.0732">periods</text><polygon fill="#A80036" points="662,309.2813,672,313.2813,662,317.2813,666,313.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="668" y1="313.2813" y2="313.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="556" y="308.4248">map(periods,ids)</text><polygon fill="#A80036" points="560,339.6328,550,343.6328,560,347.6328,556,343.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="554" x2="678" y1="343.6328" y2="343.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="17" x="566" y="338.7764">ids</text><polygon fill="#A80036" points="818.5,369.9844,828.5,373.9844,818.5,377.9844,822.5,373.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="824.5" y1="373.9844" y2="373.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="556" y="369.1279">checkIfRecordExistsByKey(ids, 'id');</text><polygon fill="#A80036" points="560,400.3359,550,404.3359,560,408.3359,556,404.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="554" x2="834.5" y1="404.3359" y2="404.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="566" y="399.4795">idsExists</text><path d="M13,419.3359 L74,419.3359 L74,427.3359 L64,437.3359 L13,437.3359 L13,419.3359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="155.5938" style="stroke: #000000; stroke-width: 2.0;" width="896" x="13" y="419.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="16" x="28" y="433.8311">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="253" x="89" y="432.7549">[FLUJO DE ERROR: Si existen alguno de los ids]</text><polygon fill="#A80036" points="75,456.0391,65,460.0391,75,464.0391,71,460.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="69" x2="538" y1="460.0391" y2="460.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="451" x="81" y="455.1826">return next(resError.badRequest(`The id already exist on the periods records`))</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="909" y1="469.0391" y2="469.0391"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="18" y="480.458">[flujo de exito]</text><polygon fill="#A80036" points="818.5,502.2266,828.5,506.2266,818.5,510.2266,822.5,506.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="549" x2="824.5" y1="506.2266" y2="506.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="556" y="501.3701">createAndSave(periods)</text><polygon fill="#A80036" points="560,532.5781,550,536.5781,560,540.5781,556,536.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="554" x2="834.5" y1="536.5781" y2="536.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="566" y="531.7217">savedPeriods</text><polygon fill="#A80036" points="75,562.9297,65,566.9297,75,570.9297,71,566.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="69" x2="543" y1="566.9297" y2="566.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="81" y="562.0732">savedPeriods</text><!--
@startuml

title <font color=red size=20>Crear Periodos</font> 
boundary "WEB/Mobile" as UI
control Periods as controlador
participant res
participant lodash
participant utils
participant PeriodRepository as repo


UI -> controlador : [POST] {\n id: xx,\n oddsTypeName: 'three way',\n oddsTypeLabel: 'Ganador',\n periodName: 'FT',\n periodLabel: 'TC'\n}
activate controlador
controlador ->  res : body
activate res
return periods
controlador -> lodash : map(periods,ids)
activate lodash
return ids
controlador -> repo : checkIfRecordExistsByKey(ids, 'id');
activate repo
return idsExists
alt FLUJO DE ERROR: Si existen alguno de los ids
controlador -> UI : return next(resError.badRequest(`The id already exist on the periods records`))
else flujo de exito
controlador -> repo : createAndSave(periods)
activate repo
return savedPeriods
return savedPeriods
end

@enduml

PlantUML version 1.2019.03(Sun Mar 10 07:04:44 BOT 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) Client VM
Java Version: 1.7.0_51-b13
Operating System: Windows 7
OS Version: 6.1
Default Encoding: Cp1252
Language: es
Country: VE
--></g></svg>